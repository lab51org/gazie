# Personalizzare una form a run-time

Le form possono essere modificate (nel loro aspetto visivo) normalmente andando a modificare il codice html/css/php presente all'interno delle stesse.

Con questa nuova funzionalità si può modificarne l'aspetto anche a run-time ovvero mentre essa è in esecuzione.

# Prerequisiti

N.B. - la form deve essere già predisposta per tale funzionalità. Ogni coppia di label/campo deve essere inserito dentro un div con id="row". Inoltre la funzionalità non deve essere attivata per i campi che sono obbligatori.

All'interno del modulo
  ```
  <form ...></form>
  ```
  che si vuole personalizzare si deve:

* aggiungere il seguente codice html

  ```
  <script type="text/javascript" src="../../library/IER/IERincludeExcludeRows.js"></script>
  <input type="hidden" id="IERincludeExcludeRowsInput" name="IERincludeExcludeRowsInput" />
  <div id="IERenableIncludeExcludeRows" title="Personalizza videata" onclick="enableIncludeExcludeRows()"></div><div id="IERsaveIncludeExcludeRows" title="Nessuna modifica fatta" onclick="saveIncludeExcludeRows()"></div>
  ```

  Questo permette di include lo script che contiene le funzioni per la gestione della funzionalità, un campo nascosto per usi interni e due div per gestire i pulsanti per 'Personalizza' e 'Salva impostazioni'.

  Attenzione -  Se il modulo php viene richiamato anche in modale (da altri moduli) la funzionalità non deve essere attivata quindi le righe andranno inserite nella condizione diverso da modale. Normalmente questa condizione viene espressa dal seguente codice

  ```
  if ($modal === false) { ...
  ```

* sostituire i div
    ```
    <div class="row">
    ```

  con un div di questo tipo

  ```
  <div id="catMer" class="row IERincludeExcludeRow">
  ```

  che abbia un id che identifichi il campo in maniera univoca in tutto il codice del modulo ed aggiungere la nuova classe "IERincludeExcludeRow"

# Come utilizzare la nuova funzionalità a run-time

Se si è seguito quanto sopra descritto all'apertura del form si potrà attivare la funzione di 'Personalizza finestra' richiamabile tramite la rotellina <i class="glyphicon glyphicon-cog"></i> situata in alto a sinistra

<center>![Personalizza finestra](_contenuti/immagini/IER_personalizza_finestra.jpg)</center>

Dopo che la funzione viene attivata verrà resa disponibile la funzione di 'Salva nuove impostazioni' richiamabile tramite il dischetto <i class="glyphicon glyphicon-floppy-disk"></i> situato alla destra della rotellina. Inoltre vengono posizionati alla sinistra di ogni riga (predisposta alla gestione) il simbolo dell'occhio aperto <span style="color:#03ab00"><i class="glyphicon glyphicon-eye-open"></i></span> nel caso la riga debba essere visibile (di default tutte le righe all'inizio sono visibili) o il simbolo dell'occhio chiuso <span style="color:red"><i class="glyphicon glyphicon-eye-close"></i></span> nel caso la riga non debba essere visualizzata.

<center>![Modifica a run-time](_contenuti/immagini/IER_modifica_a_runtime.jpg)</center>

Una volta fatte le dovute personalizzazioni si può decidere di salvarle o uscire dalla gestione ripremendo nuovamente la rotellina ed eventualmente non confermare le personalizzazioni fatte.

# Esempio pratico realizzato sul modulo php admin_artico.php (Inserisci/Modifica articolo)

    ```
    <?php
    /*
      --------------------------------------------------------------------------
      GAzie - Gestione Azienda

    ...

    */

    ...

    if ($modal === false) {
        <!--+ DC - 06/02/2019 -->
        <script type="text/javascript" src="../../library/IER/IERincludeExcludeRows.js"></script>

        <input type="hidden" id="IERincludeExcludeRowsInput" name="IERincludeExcludeRowsInput" />
        <div id="IERenableIncludeExcludeRows" title="Personalizza videata" onclick="enableIncludeExcludeRows()"></div><div id="IERsaveIncludeExcludeRows" title="Nessuna modifica fatta" onclick="saveIncludeExcludeRows()"></div>
        <!--- DC - 06/02/2019 -->
        <?php
        if ($toDo == 'insert') {

    ...

    // campo obbligatorio - riga non predisposta
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label for="descri" class="col-sm-4 control-label"><?php echo $script_transl['descri']; ?></label>
                <input class="col-sm-8" type="text" value="<?php echo $form['descri']; ?>" name="descri" maxlength="255" />
            </div>
        </div>
    </div><!-- chiude row  -->
    <!--+ DC - 06/02/2019 div class="row" --->
    <div id="catMer" class="row IERincludeExcludeRow">
        <div class="col-md-12">
            <div class="form-group">
                <label for="catmer" class="col-sm-4 control-label"><?php echo $script_transl['catmer']; ?></label>
    <?php
    $gForm->selectFromDB('catmer', 'catmer', 'codice', $form['catmer'], false, 1, ' - ', 'descri', '', 'col-sm-8', null, 'style="max-width: 250px;"');
    ?>
            </div>
        </div>
    </div><!-- chiude row  -->

    ...

    ?>
    ```
